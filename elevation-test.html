<!DOCTYPE html>
<html>
<head>
    <title>Simple Elevation Test</title>
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
    <style>
        body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
        #map { width: 100%; height: 400px; margin-bottom: 20px; }
        #results { background: #f5f5f5; padding: 15px; border-radius: 5px; }
        .feature { margin: 10px 0; padding: 10px; background: white; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>OpenAIP Vector Tile Elevation Test</h1>
    <p>Click on any navaid to see what elevation data is actually available in vector tiles</p>
    <div id="map"></div>
    <div id="results">
        <h3>Click Results:</h3>
        <div id="output">Click on a navaid to see raw vector tile properties...</div>
    </div>

    <script>
        const map = new maplibregl.Map({
            container: 'map',
            style: {
                version: 8,
                sources: {
                    openaip: {
                        type: 'vector',
                        tiles: ['http://localhost:3001/api/tiles/{z}/{x}/{y}.pbf']
                    }
                },
                layers: [
                    {
                        id: 'navaids',
                        type: 'circle',
                        source: 'openaip',
                        'source-layer': 'navaids',
                        paint: {
                            'circle-radius': 8,
                            'circle-color': '#ff0000',
                            'circle-stroke-width': 2,
                            'circle-stroke-color': '#ffffff'
                        }
                    }
                ]
            },
            center: [6.1, 47.2], // Roughly France area for LUXEUIL
            zoom: 8
        });

        map.on('click', 'navaids', (e) => {
            const feature = e.features[0];
            const props = feature.properties;
            
            console.log('ðŸŽ¯ RAW VECTOR TILE PROPERTIES:', props);
            
            const output = document.getElementById('output');
            output.innerHTML = `
                <div class="feature">
                    <h4>Navaid: ${props.name || 'Unknown'} (${props.identifier || props.ident || 'No ID'})</h4>
                    <p><strong>Elevation in vector tile:</strong> ${props.elevation || 'NOT AVAILABLE'}</p>
                    <p><strong>Frequency in vector tile:</strong> ${props.frequency || 'NOT AVAILABLE'}</p>
                    <p><strong>Type:</strong> ${props.type || 'Unknown'}</p>
                    <p><strong>Country:</strong> ${props.country || 'Unknown'}</p>
                    
                    <h5>ALL Raw Properties:</h5>
                    <pre>${JSON.stringify(props, null, 2)}</pre>
                </div>
            `;
        });

        map.on('load', () => {
            console.log('âœ… Map loaded - click on red circles to test elevation data');
        });
    </script>
</body>
</html>
